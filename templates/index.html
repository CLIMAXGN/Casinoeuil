<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <title>CASINOEUIL</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<!-- MENU LATÃ‰RAL -->
<div class="sidebar">
    <div class="sidebar-logo">
        <img src="https://github.com/user-attachments/assets/d29729d4-da3d-4b22-a951-cbc7fc0d02ca" alt="Logo" style="width: 50px; height: auto;">
    </div>
    
    <div class="sidebar-header">
        <div class="sidebar-money">
            <div class="sidebar-money-value" id="sidebarMoney">{{ money }} $</div>
        </div>
        <div class="sidebar-income" id="sidebarIncome">+0 $/s</div>
    </div>
    
    <div class="sidebar-menu">
        <a href="#" onclick="showMenu(); return false;" class="sidebar-item active">
            <span class="sidebar-icon">ğŸ </span>
            <span class="sidebar-text">Accueil</span>
        </a>
        
        <a href="#" onclick="startGame('clicker'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸ’°</span>
            <span class="sidebar-text">Clicker</span>
        </a>
        
        <a href="#" onclick="startGame('blackjack'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸƒ</span>
            <span class="sidebar-text">BlackJack</span>
        </a>
        
        <a href="#" onclick="startGame('roulette'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸ°</span>
            <span class="sidebar-text">Roulette</span>
        </a>
        
        <a href="#" onclick="startGame('minebomb'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸ’£</span>
            <span class="sidebar-text">MineBomb</span>
        </a>
        
        <a href="#" onclick="startGame('slots'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸ²</span>
            <span class="sidebar-text">Slots</span>
        </a>

        {% if current_user.username == 'archibogue88' %}
        <a href="#" onclick="startGame('plinko'); return false;" class="sidebar-item">
            <span class="sidebar-icon">ğŸ¯</span>
            <span class="sidebar-text">Plinko <span style="font-size: 9px; background: #f59e0b; padding: 2px 4px; border-radius: 3px; margin-left: 4px;">BÃŠTA</span></span>
        </a>
        {% else %}
        <div class="sidebar-item" style="opacity: 0.4; cursor: not-allowed;" title="BientÃ´t disponible">
            <span class="sidebar-icon">ğŸ”’</span>
            <span class="sidebar-text">Plinko <span style="font-size: 9px; background: #64748b; padding: 2px 4px; border-radius: 3px; margin-left: 4px;">BIENTÃ”T</span></span>
        </div>
        {% endif %}
        
        <div class="sidebar-divider"></div>
        
        <a href="/social" class="sidebar-item">
            <span class="sidebar-icon">ğŸ‘¥</span>
            <span class="sidebar-text">Amis</span>
        </a>
        
        <a href="/clans" class="sidebar-item">
            <span class="sidebar-icon">ğŸ°</span>
            <span class="sidebar-text">Clans</span>
        </a>
        
        <a href="/profile" class="sidebar-item">
            <span class="sidebar-icon">ğŸ‘¤</span>
            <span class="sidebar-text">Profil</span>
        </a>
        
        {% if current_user.username == 'archibogue88' %}
        <a href="/admin/users" class="sidebar-item">
            <span class="sidebar-icon">ğŸ”§</span>
            <span class="sidebar-text">Admin</span>
        </a>
        {% endif %}
    </div>
    
    <div class="sidebar-footer">
        <a href="/logout" class="sidebar-item logout">
            <span class="sidebar-icon">ğŸšª</span>
            <span class="sidebar-text">DÃ©connexion</span>
        </a>
    </div>
</div>

<div class="container">
    <!-- Menu principal -->
    <div id="menu" class="game-screen active">
        <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 40px; gap: 24px; flex-wrap: wrap;">
            <h2 style="font-size: 32px; margin: 0;">Choisissez votre jeu! (Et proposez-en)</h2>
            <a href="https://discord.gg/y5hatnBVRh" target="_blank" style="display: flex; align-items: center; gap: 8px; background: #5865F2; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s; font-size: 16px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
                Rejoindre le Discord
            </a>
        </div>
    
        <div class="menu-grid">
            <div class="game-card" onclick="startGame('clicker')">
                <div class="game-logo">
                    <img src="https://github.com/user-attachments/assets/e6e8a0cb-283e-488f-895b-239481e9db26" alt="Money Clicker"/>
                </div>
                <div class="game-title">Clicker</div>
                <div class="game-desc">Cliquez pour gagner un maximum d'argent!</div>
            </div>
            <div class="game-card" onclick="startGame('blackjack')">
                <div class="game-logo">
                    <img src="https://github.com/user-attachments/assets/7b155565-cee2-4cbb-bff8-fc6804ed6395" alt="BlackJack"/>
                </div>
                <div class="game-title">Blackjack</div>
                <div class="game-desc">Battez le croupier sans dÃ©passer 21.</div>
            </div>
            <div class="game-card" onclick="startGame('roulette')">
                <div class="game-logo">
                    <img src="https://github.com/user-attachments/assets/5e8038c3-76ec-4d77-b6f3-1c1eec3bd880" alt="Roulette"/>
                </div>
                <div class="game-title">Roulette</div>
                <div class="game-desc">Pariez sur votre couleur ou numÃ©ro favori.</div>
            </div>
            <div class="game-card" onclick="startGame('minebomb')">
                <div class="game-logo">
                    <img src="https://github.com/user-attachments/assets/e5c6692e-15e3-4d4e-8a13-759c310b46f6" alt="MineBomb"/>
                </div>
                <div class="game-title">Minebomb</div>
                <div class="game-desc">Ã‰vitez les bombes et multipliez vos gains.</div>
            </div>
            <div class="game-card" onclick="startGame('slots')">
                <div class="game-logo">
                    <img src="https://github.com/user-attachments/assets/5880931b-1faf-4b58-b374-122925c2d932" alt="Slots"/>
                </div>
                <div class="game-title">Slot Machine</div>
                <div class="game-desc">Alignez 2 ou 3 symboles identiques.</div>
            </div>
            {% if current_user.username == 'archibogue88' %}
            <div class="game-card" onclick="startGame('plinko')" style="position: relative;">
                <div style="position: absolute; top: 10px; right: 10px; background: #f59e0b; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: bold; z-index: 10;">
                    BÃŠTA
                </div>
                <div class="game-logo">
                    <div style="font-size: 120px;">ğŸ¯</div>
                </div>
                <div class="game-title">Plinko</div>
                <div class="game-desc">LÃ¢che la balle et vise le jackpot !</div>
            </div>
            {% else %}
            <div class="game-card" style="opacity: 0.5; cursor: not-allowed; position: relative;" title="BientÃ´t disponible">
                <div style="position: absolute; top: 10px; right: 10px; background: #64748b; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: bold; z-index: 10;">
                    BIENTÃ”T
                </div>
                <div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.7); border-radius: 12px; z-index: 5;">
                    <div style="text-align: center; color: white;">
                        <div style="font-size: 48px; margin-bottom: 8px;">ğŸ”’</div>
                        <div style="font-size: 16px; font-weight: bold;">En cours de test</div>
                        <div style="font-size: 12px; color: #94a3b8; margin-top: 4px;">Disponible prochainement</div>
                    </div>
                </div>
                <div class="game-logo">
                    <div style="font-size: 120px; filter: grayscale(1);">ğŸ¯</div>
                </div>
                <div class="game-title" style="color: #64748b;">Plinko</div>
                <div class="game-desc" style="color: #475569;">LÃ¢che la balle et vise le jackpot !</div>
            </div>
            {% endif %}
        </div>

        <!-- Stats globales, leaderboard etc... (identique Ã  avant) -->
        <div class="stats">
            <h3>Statistiques globales</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Parties jouÃ©es</div>
                    <div class="stat-value" id="totalGames">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Parties gagnÃ©es</div>
                    <div class="stat-value" id="totalWins">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Parties perdues</div>
                    <div class="stat-value" id="totalLosses">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Taux de victoire</div>
                    <div class="stat-value" id="winRate">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total perdu</div>
                    <div class="stat-value" id="totalWagered">0 $</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total gagnÃ©</div>
                    <div class="stat-value" id="totalWinnings">0 $</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Plus grand gain</div>
                    <div class="stat-value" id="biggestWin">0 $</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Plus grande perte</div>
                    <div class="stat-value" id="biggestLoss">0 $</div>
                </div>
            </div>
        </div>

        <div class="stats" style="margin-top: 24px;">
            <h3>ğŸ† Classement des joueurs</h3>
            <div class="leaderboard-container">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rang</th>
                            <th>Joueur</th>
                            <th>Argent</th>
                            <th>Parties jouÃ©es</th>
                            <th>Parties gagnÃ©es</th>
                            <th>Taux de victoire</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <tr>
                            <td colspan="6" style="text-align: center; color: #64748b;">
                                Chargement du classement...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Money Clicker -->
    <div id="clicker" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Money Clicker</h2>
        
        <div class="clicker-container">
            <div class="click-area">
                <button class="click-button" id="clickButton" onclick="doClick()">
                    <div class="click-value">+<span id="clickValue">1</span> $</div>
                    <div class="click-icon">
                        <img src="https://raw.githubusercontent.com/CLIMAXGN/Casinoeuil/refs/heads/main/e%3Dmc2.png" alt="Money" style="width: 250px; height: auto;">
                    </div>
                    <div class="click-text">CLICK ME!</div>
                </button>
                <div id="floatingNumbers"></div>
            </div>

            <div class="upgrades-section">
                <h3>Upgrades</h3>
                
                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-name">ğŸ’ª Archibogue Power</span>
                        <span class="upgrade-level">Niveau: <span id="clickLevel">1</span></span>
                    </div>
                    <div class="upgrade-desc">+1 $ par clic</div>
                    <div class="upgrade-footer">
                        <span class="upgrade-cost">CoÃ»t: <span id="clickCost">25</span> $</span>
                        <button class="upgrade-btn" onclick="buyUpgrade('click')">Acheter</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-name">ğŸ¤– 'Pataphysique Autoclicker</span>
                        <span class="upgrade-level">Niveau: <span id="autoLevel">0</span></span>
                    </div>
                    <div class="upgrade-desc">+0.5 $/s argent passif</div>
                    <div class="upgrade-footer">
                        <span class="upgrade-cost">CoÃ»t: <span id="autoCost">150</span> $</span>
                        <button class="upgrade-btn" onclick="buyUpgrade('auto')">Acheter</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-name">Usine Ã  â‚¿itcoin</span>
                        <span class="upgrade-level">Niveau: <span id="factoryLevel">0</span></span>
                    </div>
                    <div class="upgrade-desc">+2 $/s argent passif</div>
                    <div class="upgrade-footer">
                        <span class="upgrade-cost">CoÃ»t: <span id="factoryCost">800</span> $</span>
                        <button class="upgrade-btn" onclick="buyUpgrade('factory')">Acheter</button>
                    </div>
                </div>

                <div class="upgrade-card">
                    <div class="upgrade-header">
                        <span class="upgrade-name">ğŸ¨ NFT</span>
                        <span class="upgrade-level">Niveau: <span id="bankLevel">0</span></span>
                    </div>
                    <div class="upgrade-desc">+8 $/s argent passif</div>
                    <div class="upgrade-footer">
                        <span class="upgrade-cost">CoÃ»t: <span id="bankCost">5000</span> $</span>
                        <button class="upgrade-btn" onclick="buyUpgrade('bank')">Acheter</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BlackJack -->
    <div id="blackjack" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 20px;">BlackJack</h2>
        <div class="game-info" id="deckInfo" style="text-align: center; color: #94a3b8; font-size: 13px; margin-bottom: 20px;">
            Le nombre de paquets sera rÃ©vÃ©lÃ© au dÃ©but de la partie.
        </div>
        
        <div id="bjBetting">
            <div class="input-group" style="text-align: center;">
                <label>Mise:</label>
                <input type="number" id="bjBet" min="10" max="1000" value="50">
                <br><br>
                <button class="btn" onclick="startBlackjack()">Jouer</button>
            </div>
        </div>

        <div id="bjGame" style="display: none;">
            <div class="blackjack-table">
                <div class="hand">
                    <div class="hand-title">Dealer - <span id="dealerTotal">?</span></div>
                    <div class="cards" id="dealerCards"></div>
                </div>
                <div class="hand">
                    <div class="hand-title">Toi - <span id="playerTotal">0</span></div>
                    <div class="cards" id="playerCards"></div>
                </div>
            </div>
            <div style="text-align: center;">
                <button class="btn" id="hitBtn" onclick="hit()">Hit</button>
                <button class="btn" id="standBtn" onclick="stand()">Stand</button>
            </div>
            <div id="bjMessage"></div>
        </div>
    </div>

    <!-- Roulette -->
    <div id="roulette" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Roulette</h2>
        
        <div class="roulette-wheel" id="rouletteWheel">
            <div class="roulette-center" id="rouletteResult">?</div>
        </div>

        <div id="rouletteBetting">
            <div style="text-align: center;">
                <div class="input-group">
                    <label>Mode de jeu:</label>
                    <select id="rouletteMode" onchange="updateRouletteMode()">
                        <option value="color">Couleur (x2)</option>
                        <option value="number">Nombre (x35)</option>
                    </select>
                </div>

                <div id="colorMode">
                    <div class="color-buttons">
                        <button class="color-btn red" onclick="selectColor('Red')">ROUGE</button>
                        <button class="color-btn black" onclick="selectColor('Black')">NOIR</button>
                    </div>
                </div>

                <div id="numberMode" style="display: none;">
                    <div class="input-group">
                        <label>Choisissez un nombre (0-36):</label>
                        <input type="number" id="rouletteNumber" min="0" max="36" value="0">
                    </div>
                </div>

                <div class="input-group">
                    <label>Mise:</label>
                    <input type="number" id="rouletteBet" min="10" max="1000" value="50">
                </div>

                <button class="btn" onclick="spinRoulette()">Tourner</button>
            </div>
        </div>

        <div id="rouletteMessage"></div>
    </div>

    <!-- MineBomb -->
    <div id="minebomb" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">MineBomb</h2>
        
        <div id="mbBetting">
            <div class="input-group" style="text-align: center;">
                <label>Mise:</label>
                <input type="number" id="mbBet" min="10" max="2500" value="50">
                <br>
                <label>Nombre de bombes (3-10):</label>
                <input type="number" id="mbBombs" min="3" max="10" value="5">
                <div class="bomb-info">
                    Plus de bombes = Multiplicateur plus Ã©levÃ©! ğŸ’ (Max: x10)<br>
                    <span style="color: #ef4444; font-size: 13px;">âš ï¸ Mise maximum : 2500$ sur ce jeu</span>
                </div>
                <br>
                <button class="btn" onclick="startMineBomb()">Jouer</button>
            </div>
        </div>

        <div id="mbGame" style="display: none;">
            <div class="mb-game-info">
                <div class="mb-info-item">
                    <span class="mb-label">Bombes:</span>
                    <span class="mb-value" id="bombCount">5</span>
                </div>
                <div class="mb-info-item">
                    <span class="mb-label">Diamants:</span>
                    <span class="mb-value" id="diamondCount">0</span>
                </div>
            </div>
            <div class="multiplier-display">
                x<span id="multiplier">1.00</span>
                <br>
                <span style="font-size: 20px;">Gain potentiel: <span id="potentialWin">0</span> $</span>
            </div>
            <div class="minebomb-grid" id="mineGrid"></div>
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn cashout-btn" id="cashoutBtn" onclick="cashout()" disabled>CASHOUT</button>
            </div>
            <div id="mbMessage"></div>
        </div>
    </div>

    <!-- Slots -->
    <div id="slots" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Slot Machine</h2>
        
        <div class="slots-machine">
            <div class="slots-display">
                <div class="slot-reel" id="reel1">ğŸ°</div>
                <div class="slot-reel" id="reel2">ğŸ‹</div>
                <div class="slot-reel" id="reel3">ğŸŠ</div>
            </div>
            
            <div class="slots-paytable">
                <h3>Gains</h3>
                <div class="paytable-row">ğŸ’ ğŸ’ ğŸ’ = x100 MEGA JACKPOT!</div>
                <div class="paytable-row">7ï¸âƒ£ 7ï¸âƒ£ 7ï¸âƒ£ = x50 JACKPOT!</div>
                <div class="paytable-row">ğŸ° ğŸ° ğŸ° = x20</div>
                <div class="paytable-row">ğŸ‹ ğŸ‹ ğŸ‹ = x15</div>
                <div class="paytable-row">ğŸŠ ğŸŠ ğŸŠ = x12</div>
                <div class="paytable-row">ğŸ‡ ğŸ‡ ğŸ‡ = x10</div>
                <div class="paytable-row" style="border-top: 2px solid #3b82f6; margin-top: 8px; padding-top: 12px;">2 identiques = x2</div>
            </div>

            <div class="input-group" style="text-align: center; margin-top: 24px;">
                <label>Mise:</label>
                <input type="number" id="slotsBet" min="10" max="1000" value="50">
                <br><br>
                <button class="btn" id="spinSlotsBtn" onclick="spinSlots()">ğŸ° TOURNE</button>
            </div>

            <div id="slotsMessage"></div>
        </div>
    </div>

    <!-- PLINKO - STYLE COHÃ‰RENT AVEC LES AUTRES JEUX -->
    <div id="plinko" class="game-screen">
        <button class="back-btn" onclick="backToMenu()">â† Back</button>
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Plinko</h2>
        
        <div style="max-width: 900px; margin: 0 auto;">
            <!-- Section des paris -->
            <div style="background: #1e293b; border: 1px solid rgba(148, 163, 184, 0.1); border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="input-group">
                        <label>Mise:</label>
                        <input type="number" id="plinkoBet" min="10" max="10000" value="50">
                    </div>
                    <div class="input-group">
                        <label>Niveau de risque:</label>
                        <select id="plinkoRisk">
                            <option value="low">ğŸŸ¢ Faible (gains stables)</option>
                            <option value="medium" selected>ğŸŸ¡ Moyen (Ã©quilibrÃ©)</option>
                            <option value="high">ğŸ”´ Ã‰levÃ© (gros gains ou rien)</option>
                        </select>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn" id="plinkoDropBtn" onclick="dropPlinko()" style="font-size: 18px; padding: 16px 48px;">
                        ğŸ¯ LÃ‚CHER LA BALLE
                    </button>
                </div>
            </div>
            
            <!-- Canvas du jeu -->
            <canvas id="plinkoCanvas" width="850" height="650" style="
                border: 3px solid #3b82f6; 
                border-radius: 12px; 
                background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%); 
                display: block; 
                margin: 0 auto;
                box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
            "></canvas>
            
            <!-- Multiplicateurs -->
            <div id="plinkoMultipliers" style="
                display: flex; 
                justify-content: space-between; 
                margin-top: 16px; 
                padding: 0 20px;
                gap: 4px;
            "></div>
            
            <!-- Message de rÃ©sultat -->
            <div id="plinkoMessage" style="margin-top: 24px;"></div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>